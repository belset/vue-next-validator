function validate(i,e,t,a={delay:0,immediate:!0}){const o={delay:400,immediate:!1,...a},d=(i,e)=>console.warn("[vue-next-validator]: "+i,e),l=i=>"function"==typeof i?()=>((i,e)=>{let t;try{t=e?i(...e):i()}catch(i){d("execution error:",i)}return t})(i):isReactive(i)?()=>i:isRef(i)?()=>i.value:()=>i;"function"!=typeof t&&d("'callback' must be a function");const n=reactive({valid:!1,invalid:!1,validating:!1,value:void 0,data:void 0}),v=(i,e,t)=>{n.valid=1===i,n.invalid=2===i,n.validating=3===i,n.value=e,n.data=t};let c=0,u=0;const r=(i,e,a,d)=>{const l=()=>{const o=t.call(this,e,a,d);!0===o?(v(1,e,void 0),i=void 0):!1===o&&(v(2,e,void 0),i=void 0)};c?c=clearTimeout(c):o.immediate&&l(),u===i&&(c=setTimeout((()=>{c=clearTimeout(c),u===i&&l()}),o.delay>0?o.delay:10))},s=i=>{const e=++u;void 0===i?v(void 0,void 0,void 0):(v(3,i,void 0),r(e,i,(t=>{u===e&&v(1,i,t)}),(t=>{u===e&&v(2,i,t)})))};let m=null;return watch(i,(i=>{i&&!m?(s(i),m=watch(l(e),(i=>s(i)))):!i&&m&&(m(),m=null,s(void 0))})),readonly(n)}